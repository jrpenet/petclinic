<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
    <link href="https://unpkg.com/swiper@8/swiper-bundle.min.css" rel="stylesheet"/>
    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/reserva.css">
    <link rel="stylesheet" href="./styles/horarios.css">
    <title>Pet Clinic - Horários</title>
</head>
<body>
    <div class="main-content">
        <header>
            <div>
                <a href="./index.html"><img src="./images/logo.png" alt="Logo" class="logomarca"></a>
                <nav>
                    <div>
                        <span class="material-icons">email</span>
                        <a href="mailto:info@petclinic.com.br">info@petclinic.com.br</a>
                    </div>
                    <div>
                        <span class="material-icons">
                            phone
                            </span>
                        <a href="tel:+558132072020">+55 81 3207-2020</a>
                    </div>
                </nav>
            </div>
        </header>
        <section>
            <h2>Reserva</h2>
            <p class="valorConsulta">Valor da consulta R$ 69,90</p>
    
            <!-- barra de progresso -->
            <div class="barra-container">
                <ul class="barra-progresso">
                    <li class="ativado"><span class="material-icons topo">done</span>Especialidade</li>
                    <li class="ativado"><span class="material-icons topo topo1">done</span>Profissional</li>
                    <li class="ativado">Data e Hora</li>
                    <li>Dados</li>
                </ul>
            </div>
    
            <h3>Horário de atendimento</h3>
            <p class="txtEscolha">Selecione o dia e a hora para consulta</p>
    
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide">
                        <label class="card-data">
                            <input type="radio" name="listaHoras" hidden>
                                <div class="info-data">
                                    <p>Seg. 14 de Março</p>
                                </div>
                                <div class="info-horas">
                                    <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>11:00</p></label>
                                    <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>13:00</p></label>
                                    <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>15:00</p></label>
                                    <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>16:00</p></label>
                                </div>
                        </label>
                    </div>
                    <div class="swiper-slide">
                        <label class="card-data">
                            <input type="radio" name="listaHoras" hidden>
                            <div class="info-data">
                                <p>Ter. 15 de Março</p>
                            </div>
                            <div class="info-horas">
                                <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>09:00</p></label>
                                <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>10:00</p></label>
                            </div>
                        </label>
                    </div>
                    <div class="swiper-slide">
                        <label class="card-data">
                            <input type="radio" name="listaHoras" hidden>
                            <div class="info-data">
                                <p>Qui. 16 de Março</p>
                            </div>
                            <div class="info-horas">
                                <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>11:00</p></label>
                                <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>13:00</p></label>
                                <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>15:00</p></label>
                            </div>
                        </label>
                    </div>
                    <div class="swiper-slide">
                        <label class="card-data">
                            <input type="radio" name="listaHoras" hidden>
                            <div class="info-data">
                                <p>Sex. 17 de Março</p>
                            </div>
                            <div class="info-horas">
                                <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>11:00</p></label>
                                <label class="horas"><input type="radio" hidden name="horarios"><span class="material-icons">done</span><p>13:00</p></label>
                            </div>
                        </label>
                    </div>
                </div>
      
                <!-- If we need navigation buttons -->
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
      
            </div>
    
        </section>
    </div>
    
    <div class="footer"><!-- Os botões de transição -->
        <div class="navegaTelas">
            <span>
                <button class="secundario" id="voltarPg">Voltar</button>
                <button class="primario2" id="proximo">Próximo</button>
            </span>
        </div>
    </div>
    <script type="text/javascript" src="./js/hora.js"></script>
</body>
<script>
    const swiper = new Swiper('.swiper', {
    // Optional parameters
    direction: 'horizontal',
    loop: true,
    slidesPerView: 3,
    spaceBetween: 5,

    // If we need pagination
    pagination: {
        el: '.swiper-pagination',
    },

    // Navigation arrows
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
    },

    
    });
</script>
<script type="text/javascript">

//refresh automatico pra evitar bugs

    (function() {
        if( window.sessionStorage ) {
    
        if( !sessionStorage.getItem( 'firstLoad' ) ) {
            sessionStorage[ 'firstLoad' ] = true;
            window.location.reload();
    
        } else {
            sessionStorage.removeItem( 'firstLoad' );
        }
        }
    })();

    apagahora()

    const btnVoltar = document.querySelector('#voltarPg')
    const btnPrx = document.querySelector('#proximo')
    btnVoltar.addEventListener('click', (e) => {
        e.preventDefault()
        window.history.back()
    })

    const horas = document.getElementsByName('horarios')
    horas.forEach((h) => {
        h.addEventListener('change', () => {
            for(let i=0; i<horas.length; i++){
                if(horas[i].checked == true){
                    horas[i].parentNode.setAttribute('style', 'background-color: #05a78e;')                        
                    horas[i].parentNode.children[2].setAttribute('style', 'color: #fff;')
                }
                if(horas[i].checked == false){
                    horas[i].parentNode.removeAttribute('style')
                    horas[i].parentNode.children[2].removeAttribute('style')
                }
            }
        })
    })

    btnPrx.addEventListener('click', (e) => {
        e.preventDefault()

        //permitir ir para o prox apenas se um dos horários foi escolhido
        const escolheuHora = document.querySelectorAll('input[type=radio]:checked').length
        const hr = document.querySelectorAll('input[type=radio]:checked')
        if(escolheuHora > 0){
            let data = hr[0].parentNode.parentNode.parentNode.children[1].children[0].textContent
            let h = hr[0].parentNode.children[2].textContent
            criahora(data, h)
            location.assign('./formulario.html')
        }else{
            alert('Favor escolher ao menos 1 opção')
        }
    })
</script>
</html>